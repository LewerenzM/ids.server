* put file01.dat

2016-11-01 13:04:37,259 INFO [http-listener-2(5)] IdsBean - New webservice request: put name='file01.dat' datafileFormatId='911036' datasetId='911213' description='null' doi='null' datafileCreateTime='null' datafileModTime='null'
2016-11-01 13:04:37,332 DEBUG [http-listener-2(5)] LockManager - Acquired a SHARED lock on 911213.
2016-11-01 13:05:20,279 DEBUG [http-listener-2(5)] IdsBean - Registered datafile for dataset 911213 for file01.dat at 911105/911213/d9d093cd-9dc1-4ad2-b05a-3a65bf9a63e5
2016-11-01 13:05:20,280 INFO [http-listener-2(5)] FiniteStateMachine - Requesting WRITE of dataset 911105/911213 (ESNF/12100409-ST/1.1-P/test_race_upload_archive)
2016-11-01 13:05:20,280 DEBUG [http-listener-2(5)] FiniteStateMachine - Created marker /srv/ids/storage/no-icat/cache/marker/911213
2016-11-01 13:05:20,281 DEBUG [http-listener-2(5)] FiniteStateMachine - Requesting delay of writing of dataset 911105/911213 (ESNF/12100409-ST/1.1-P/test_race_upload_archive) till Tue Nov 01 13:06:20 CET 2016
2016-11-01 13:05:20,296 DEBUG [http-listener-2(5)] Transmitter - Sent jms message put 134.30.210.106
2016-11-01 13:05:20,297 DEBUG [http-listener-2(5)] LockManager$SingleLock - Released a lock on 911213.

* put file02.dat

2016-11-01 13:04:37,267 INFO [http-listener-2(4)] IdsService - creating IdsService
2016-11-01 13:04:37,267 INFO [http-listener-2(4)] IdsService - created IdsService
2016-11-01 13:04:37,270 INFO [http-listener-2(4)] IdsBean - creating IdsBean
2016-11-01 13:04:37,272 INFO [http-listener-2(4)] IdsBean - created IdsBean
2016-11-01 13:04:37,273 INFO [http-listener-2(4)] IdsBean - New webservice request: put name='file02.dat' datafileFormatId='911036' datasetId='911213' description='null' doi='null' datafileCreateTime='null' datafileModTime='null'
2016-11-01 13:04:37,335 DEBUG [http-listener-2(4)] LockManager - Acquired a SHARED lock on 911213.
2016-11-01 13:06:50,571 DEBUG [http-listener-2(4)] IdsBean - Registered datafile for dataset 911213 for file02.dat at 911105/911213/4af76c17-76e6-438a-a9f0-8b58b8ca996e
2016-11-01 13:06:50,572 INFO [http-listener-2(4)] FiniteStateMachine - Requesting WRITE of dataset 911105/911213 (ESNF/12100409-ST/1.1-P/test_race_upload_archive)
2016-11-01 13:06:50,572 DEBUG [http-listener-2(4)] FiniteStateMachine - Created marker /srv/ids/storage/no-icat/cache/marker/911213
2016-11-01 13:06:50,573 DEBUG [http-listener-2(4)] FiniteStateMachine - Requesting delay of writing of dataset 911105/911213 (ESNF/12100409-ST/1.1-P/test_race_upload_archive) till Tue Nov 01 13:07:50 CET 2016
2016-11-01 13:06:50,581 DEBUG [http-listener-2(4)] Transmitter - Sent jms message put 134.30.210.106
2016-11-01 13:06:50,582 DEBUG [http-listener-2(4)] LockManager$SingleLock - Released a lock on 911213.

* archive dataset

2016-11-01 13:05:20,463 INFO [http-listener-2(3)] IdsBean - New webservice request: archive investigationIds='null' datasetIds='911213' datafileIds='null'
2016-11-01 13:05:20,543 INFO [http-listener-2(3)] FiniteStateMachine - Requesting ARCHIVE of dataset 911105/911213 (ESNF/12100409-ST/1.1-P/test_race_upload_archive)

* WRITE of dataset 911105/911213 (ESNF/12100409-ST/1.1-P/test_race_upload_archive)

2016-11-01 13:06:23,994 DEBUG [FSM Timer] LockManager - Acquired a SHARED lock on 911213.
2016-11-01 13:06:23,994 DEBUG [FSM Timer] FiniteStateMachine$DsProcessQueue - Will process 911105/911213 (ESNF/12100409-ST/1.1-P/test_race_upload_archive) with WRITE_THEN_ARCHIVE_REQUESTED
2016-11-01 13:06:23,996 DEBUG [Thread-57] DsWriter - Creating /srv/ids/storage/no-icat/cache/dataset/5899715045835005409.tmp
2016-11-01 13:06:35,045 DEBUG [Thread-57] DsWriter - Removed marker /srv/ids/storage/no-icat/cache/marker/911213
2016-11-01 13:06:35,045 DEBUG [Thread-57] DsWriter - Write of 911105/911213 (ESNF/12100409-ST/1.1-P/test_race_upload_archive) completed
2016-11-01 13:06:35,045 DEBUG [Thread-57] LockManager$SingleLock - Released a lock on 911213.

* FSM wait for lock

2016-11-01 13:06:38,996 DEBUG [FSM Timer] FiniteStateMachine$DsProcessQueue - Could not acquire lock on 911105/911213 (ESNF/12100409-ST/1.1-P/test_race_upload_archive), postpone process with ARCHIVE_REQUESTED
2016-11-01 13:06:43,997 DEBUG [FSM Timer] FiniteStateMachine$DsProcessQueue - Could not acquire lock on 911105/911213 (ESNF/12100409-ST/1.1-P/test_race_upload_archive), postpone process with ARCHIVE_REQUESTED
2016-11-01 13:06:48,998 DEBUG [FSM Timer] FiniteStateMachine$DsProcessQueue - Could not acquire lock on 911105/911213 (ESNF/12100409-ST/1.1-P/test_race_upload_archive), postpone process with ARCHIVE_REQUESTED

* WRITE of dataset 911105/911213 (ESNF/12100409-ST/1.1-P/test_race_upload_archive)

2016-11-01 13:07:54,000 DEBUG [FSM Timer] LockManager - Acquired a SHARED lock on 911213.
2016-11-01 13:07:54,001 DEBUG [FSM Timer] FiniteStateMachine$DsProcessQueue - Will process 911105/911213 (ESNF/12100409-ST/1.1-P/test_race_upload_archive) with WRITE_THEN_ARCHIVE_REQUESTED
2016-11-01 13:07:54,002 DEBUG [Thread-58] DsWriter - Creating /srv/ids/storage/no-icat/cache/dataset/8834235636520039662.tmp
2016-11-01 13:08:04,634 DEBUG [Thread-58] DsWriter - Removed marker /srv/ids/storage/no-icat/cache/marker/911213
2016-11-01 13:08:04,635 DEBUG [Thread-58] DsWriter - Write of 911105/911213 (ESNF/12100409-ST/1.1-P/test_race_upload_archive) completed
2016-11-01 13:08:04,635 DEBUG [Thread-58] LockManager$SingleLock - Released a lock on 911213.

* ARCHIVE of dataset 911105/911213 (ESNF/12100409-ST/1.1-P/test_race_upload_archive)

2016-11-01 13:08:09,002 DEBUG [FSM Timer] LockManager - Acquired a EXCLUSIVE lock on 911213.
2016-11-01 13:08:09,002 DEBUG [FSM Timer] FiniteStateMachine$DsProcessQueue - Will process 911105/911213 (ESNF/12100409-ST/1.1-P/test_race_upload_archive) with ARCHIVE_REQUESTED
2016-11-01 13:08:09,041 DEBUG [Thread-59] DsArchiver - Archive of 911105/911213 (ESNF/12100409-ST/1.1-P/test_race_upload_archive) completed
2016-11-01 13:08:09,047 DEBUG [Thread-59] LockManager$SingleLock - Released a lock on 911213.

# Local Variables:
# mode: org
# End:
